@base = http://localhost:4000
@adminAccessToken = paste-admin-token-here
@accessToken = eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpZCI6MywiZW1haWwiOiJ1c2VyMUB0ZXN0LmNvbSIsInJvbGUiOiJVU0VSIiwiaWF0IjoxNzY1MDMxMDYxLCJleHAiOjE3NjUwMzQ2NjF9.5D7CdYvmWSOaQ3_FT0O86AgjoAZzinScJkMHs2kS9go
@refreshToken = eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpZCI6MywiaWF0IjoxNzY1MDMxMDYxLCJleHAiOjE3NjU2MzU4NjF9.-jUlabAUCRPY3IrASww9ZiNFEu5jVHnOrS68e7Zw-pE
@userId = 3
@bookId = 25
@cartId = 10
@orderId = 9
@reviewId = 5
@commentId = 8

### Health check
GET {{base}}/health

### Database health
GET {{base}}/health/db

### Auth - login
POST {{base}}/auth/login
Content-Type: application/json

{
  "email": "user1@example.com",
  "password": "P@ssw0rd!"
}

### Auth - refresh access token
POST {{base}}/auth/refresh
Content-Type: application/json

{
  "refreshToken": "{{refreshToken}}"
}

### Auth - logout (invalidate refresh token)
POST {{base}}/auth/logout
Content-Type: application/json

{
  "userId": {{userId}}
}

### Users - sign up
POST {{base}}/users
Content-Type: application/json

{
  "email": "newuser@example.com",
  "password": "secret123",
  "name": "New User",
  "gender": "MALE"
}

### Users - me (requires user token)
GET {{base}}/users/me
Authorization: Bearer {{accessToken}}

### Users - list all (admin only)
GET {{base}}/users?page=1&size=20&sort=id,ASC
Authorization: Bearer {{adminAccessToken}}

### Users - detail (self or admin)
GET {{base}}/users/{{userId}}
Authorization: Bearer {{accessToken}}

### Users - update (self or admin)
PATCH {{base}}/users/{{userId}}
Content-Type: application/json
Authorization: Bearer {{accessToken}}

{
  "name": "Updated Name",
  "address": "Seoul, Korea",
  "phoneNumber": "010-1234-5678"
}

### Users - delete (admin only)
DELETE {{base}}/users/{{userId}}
Authorization: Bearer {{adminAccessToken}}

### Users - reviews by user (self or admin)
GET {{base}}/users/{{userId}}/reviews
Authorization: Bearer {{accessToken}}

### Users - comments by user (self or admin)
GET {{base}}/users/{{userId}}/comments
Authorization: Bearer {{accessToken}}

### Users - liked reviews (self or admin)
GET {{base}}/users/{{userId}}/review-likes
Authorization: Bearer {{accessToken}}

### Users - liked comments (self or admin)
GET {{base}}/users/{{userId}}/comment-likes
Authorization: Bearer {{accessToken}}

### Users - favorites (self or admin)
GET {{base}}/users/{{userId}}/favorites
Authorization: Bearer {{accessToken}}

### Users - carts (self or admin)
GET {{base}}/users/{{userId}}/carts
Authorization: Bearer {{accessToken}}

### Users - orders (self or admin)
GET {{base}}/users/{{userId}}/orders
Authorization: Bearer {{accessToken}}

### Books - list with filters
GET {{base}}/books?page=1&size=10&sort=createdAt,DESC&keyword=code

### Books - list with sort example (seed-friendly)
GET {{base}}/books?page=1&size=5&sort=price,ASC&keyword=샘플&category=IT&dateFrom=2023-01-01T00:00:00.000Z&dateTo=2030-12-31T23:59:59.000Z

### Books - detail
GET {{base}}/books/{{bookId}}

### Books - create (admin only)
POST {{base}}/books
Content-Type: application/json
Authorization: Bearer {{adminAccessToken}}

{
  "title": "Clean Architecture",
  "isbn": "9791189323151",
  "price": 22000,
  "publisher": "Wikibooks",
  "summary": "Software design principles",
  "publicationDate": "2024-01-15T00:00:00.000Z",
  "categoryIds": [1, 2],
  "authorIds": [3]
}

### Books - update (admin only)
PATCH {{base}}/books/{{bookId}}
Content-Type: application/json
Authorization: Bearer {{adminAccessToken}}

{
  "price": 19900,
  "summary": "Updated summary",
  "categoryIds": [1],
  "authorIds": [3]
}

### Books - delete (admin only)
DELETE {{base}}/books/{{bookId}}
Authorization: Bearer {{adminAccessToken}}

### Books - reviews
GET {{base}}/books/{{bookId}}/reviews

### Books - categories
GET {{base}}/books/{{bookId}}/categories

### Books - authors
GET {{base}}/books/{{bookId}}/authors

### Carts - add item
POST {{base}}/carts
Content-Type: application/json
Authorization: Bearer {{accessToken}}

{
  "userId": {{userId}},
  "bookId": {{bookId}},
  "quantity": 1
}

### Carts - admin list all
GET {{base}}/carts?page=1&size=20&sort=createdAt,DESC
Authorization: Bearer {{adminAccessToken}}

### Carts - items for user
GET {{base}}/carts/user/{{userId}}
Authorization: Bearer {{accessToken}}

### Carts - item detail
GET {{base}}/carts/{{cartId}}
Authorization: Bearer {{accessToken}}

### Carts - update quantity
PATCH {{base}}/carts/{{cartId}}
Content-Type: application/json
Authorization: Bearer {{accessToken}}

{
  "quantity": 2
}

### Carts - delete item
DELETE {{base}}/carts/{{cartId}}
Authorization: Bearer {{accessToken}}

### Orders - create
POST {{base}}/orders
Content-Type: application/json
Authorization: Bearer {{accessToken}}

{
  "userId": {{userId}},
  "deliveryAddress": "Seoul, Korea",
  "items": [
    { "bookId": {{bookId}}, "quantity": 1 }
  ]
}

### Orders - admin list all
GET {{base}}/orders?page=1&size=20&sort=createdAt,DESC
Authorization: Bearer {{adminAccessToken}}

### Orders - list for user
GET {{base}}/orders/user/{{userId}}
Authorization: Bearer {{accessToken}}

### Orders - detail
GET {{base}}/orders/{{orderId}}
Authorization: Bearer {{accessToken}}

### Orders - update status
PATCH {{base}}/orders/{{orderId}}
Content-Type: application/json
Authorization: Bearer {{accessToken}}

{
  "orderStatus": "SHIPPED"
}

### Orders - delete
DELETE {{base}}/orders/{{orderId}}
Authorization: Bearer {{accessToken}}

### Reviews - create
POST {{base}}/reviews
Content-Type: application/json
Authorization: Bearer {{accessToken}}

{
  "userId": {{userId}},
  "bookId": {{bookId}},
  "rating": 5,
  "comment": "Great book!"
}

### Reviews - list
GET {{base}}/reviews?page=1&size=10&sort=createdAt,DESC

### Reviews - detail
GET {{base}}/reviews/{{reviewId}}

### Reviews - update
PATCH {{base}}/reviews/{{reviewId}}
Content-Type: application/json
Authorization: Bearer {{accessToken}}

{
  "rating": 4,
  "comment": "Updated comment"
}

### Reviews - delete
DELETE {{base}}/reviews/{{reviewId}}
Authorization: Bearer {{accessToken}}

### Reviews - comments
GET {{base}}/reviews/{{reviewId}}/comments

### Reviews - likes
GET {{base}}/reviews/{{reviewId}}/likes

### Comments - create
POST {{base}}/comments
Content-Type: application/json
Authorization: Bearer {{accessToken}}

{
  "userId": {{userId}},
  "reviewId": {{reviewId}},
  "comment": "I agree!"
}

### Comments - list
GET {{base}}/comments?page=1&size=10&sort=createdAt,DESC

### Comments - detail
GET {{base}}/comments/{{commentId}}

### Comments - update
PATCH {{base}}/comments/{{commentId}}
Content-Type: application/json
Authorization: Bearer {{accessToken}}

{
  "comment": "Updated reply"
}

### Comments - delete
DELETE {{base}}/comments/{{commentId}}
Authorization: Bearer {{accessToken}}

### Comments - likes
GET {{base}}/comments/{{commentId}}/likes

### Admin - list users
GET {{base}}/admin/users
Authorization: Bearer {{adminAccessToken}}

### Admin - ban user
PATCH {{base}}/admin/users/{{userId}}/ban
Authorization: Bearer {{adminAccessToken}}

### Admin - order statistics
GET {{base}}/admin/statistics/orders
Authorization: Bearer {{adminAccessToken}}
